<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <title>Manager | Follow</title>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <% include partials/navbar %>
        <% if(btnradio){ %>
            <script>
                axios.get('/api/news').then(res => {
                    let data = res.data;
                    let html = "";
                    for (let i = 0; i < data.length; i++) {
                        html += `
                                        <tr>
                                          <th scope="row">${i + 1}</th>
                                          <td><a href="${data[i].url}">${data[i].url}</a></td>
                                          <td><img src="${data[i].logo}" style="width:100px;"/></td>
                                          <td>${data[i].created}</td>
                                          <td>${data[i].updated}</td>
                                          <td><a onClick="onEdit(this)">Edit</a>
                             <a onClick="onDelete(this)">Delete</a></td>
                                        </tr>
                                      `;
                    }
                    document.getElementById("news").innerHTML = html;
                }); </script>
            <h1>
                <center>News Manager</center>
            </h1>
            <hr>
            <div class="news-form">
                <form onsubmit="event.preventDefault();onFormSubmit();" autocomplete="off">
                    <div>
                        <label>URL</label>
                        <input type="text" name="url" id="url">
                    </div>
                    <div>
                        <label>Logo</label>
                        <input type="image" name="logo" id="logo">
                    </div>
                    <div class="form-action-buttons">
                        <input type="submit" value="Submit">
                    </div>
                </form>
            </div>
            <br />
            <div class="news-table">
                <table class="table table-striped list" id="newsList">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th>URL</th>
                            <th>Logo</th>
                            <th>Actions</th>
                            <th scope="col">Created</th>
                            <th scope="col">Updated</th>
                        </tr>
                    </thead>
                    <tbody id="news">
                    </tbody>
                </table>
            </div>
            <script src="script.js"></script>
            <% } else{ %>
                <script>
                    axios.get('/api/ranking?all=true').then(res => {
                        let data = res.data;
                        let html = "";
                        for (let i = 0; i < data.length; i++) {
                            html += `
                            <tr>
                              <th scope="row">${i + 1}</th>
                              <td>${data[i].word}</td>
                              <td>${data[i].score}</td>
                              <td>${data[i].created}</td>
                              <td>${data[i].updated}</td>
                            </tr>
                          `;
                        }
                        document.getElementById("ranking").innerHTML = html;
                    }); </script>
                <h1>
                    <center>Ranking</center>
                </h1>
                <hr>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Word</th>
                            <th scope="col">Score</th>
                            <th scope="col">Created</th>
                            <th scope="col">Updated</th>
                        </tr>
                    </thead>
                    <tbody id="ranking">
                    </tbody>
                    <% } %>
</body>

</html>